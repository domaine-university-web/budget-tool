<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Money Breakdown</title>

  <!-- Helps it feel more like a home-screen app -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />

  <style>
    :root { --pad: 16px; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
      margin: 0; padding: calc(env(safe-area-inset-top) + var(--pad)) var(--pad) calc(env(safe-area-inset-bottom) + var(--pad));
      background: #fff; color: #111;
      max-width: 780px;
    }
    h1 { font-size: 22px; margin: 0 0 10px; }
    .card { border: 1px solid #e5e5e5; border-radius: 14px; padding: 14px; }
    label { display:block; margin: 6px 0 8px; font-weight: 600; }
    input {
      width: 100%; padding: 14px 12px; font-size: 18px;
      border-radius: 12px; border: 1px solid #cfcfcf;
    }
    .row { display:flex; gap: 10px; margin-top: 12px; }
    button {
      flex: 1;
      padding: 14px 12px;
      font-size: 17px;
      border-radius: 12px;
      border: 0;
      cursor: pointer;
    }
    button.primary { background:#111; color:#fff; }
    button.secondary { background:#efefef; color:#111; }
    table { width:100%; border-collapse: collapse; margin-top: 12px; }
    th, td { padding: 12px 8px; border-bottom: 1px solid #f0f0f0; text-align:left; font-size: 16px; }
    th { font-size: 13px; color:#666; text-transform: uppercase; letter-spacing: .04em; }
    .total { font-weight: 700; }
    .note { margin-top: 10px; color:#666; font-size: 13px; line-height: 1.35; }
    .pill { display:inline-block; padding: 6px 10px; border-radius: 999px; background:#f6f6f6; font-size: 13px; color:#333; margin-bottom: 10px; }
  </style>
</head>
<body>
  <h1>ðŸ’° Money Breakdown</h1>
  <div class="pill">50% Household â€¢ 15% Tax â€¢ 10% Charity â€¢ 5% Family â€¢ 20% Investing</div>

  <div class="card">
    <label for="amount">Enter amount</label>
    <input id="amount" inputmode="decimal" placeholder="e.g., 2500" />

    <div class="row">
      <button class="primary" onclick="calculate()">Calculate</button>
      <button class="secondary" onclick="clearAll()">Clear</button>
    </div>

    <div id="results" style="display:none;">
      <table>
        <thead>
          <tr><th>Category</th><th>%</th><th>Amount</th></tr>
        </thead>
        <tbody id="tbody"></tbody>
        <tfoot>
          <tr class="total"><td>Total</td><td>100%</td><td id="totalCell"></td></tr>
        </tfoot>
      </table>

      <div class="row">
        <button class="secondary" onclick="copyText()">Copy breakdown</button>
      </div>

      <div class="note">
        Rounds to cents. Any tiny rounding difference is adjusted into <b>Household</b>.
      </div>
    </div>
  </div>

<script>
  const splits = [
    { name: "Household", pct: 0.50 },
    { name: "Tax", pct: 0.15 },
    { name: "Charitable Giving", pct: 0.10 },
    { name: "Giving (Family)", pct: 0.05 },
    { name: "Investing", pct: 0.20 },
  ];

  const amountEl = document.getElementById("amount");
  const saved = localStorage.getItem("lastAmount");
  if (saved) amountEl.value = saved;

  function money(n) {
    return n.toLocaleString(undefined, { style: "currency", currency: "USD" });
  }

  function calculate() {
    const raw = amountEl.value.trim().replace(/[$, ]/g, "");
    const total = Number(raw);

    if (!isFinite(total) || total < 0) {
      alert("Enter a valid dollar amount (example: 2500).");
      return;
    }

    localStorage.setItem("lastAmount", String(total));

    let amounts = splits.map(s => ({
      name: s.name,
      pct: s.pct,
      value: Math.round(total * s.pct * 100) / 100
    }));

    const sum = amounts.reduce((a, b) => a + b.value, 0);
    const drift = Math.round((total - sum) * 100) / 100;
    const household = amounts.find(a => a.name === "Household");
    household.value = Math.round((household.value + drift) * 100) / 100;

    const tbody = document.getElementById("tbody");
    tbody.innerHTML = "";
    amounts.forEach(a => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${a.name}</td><td>${Math.round(a.pct*100)}%</td><td>${money(a.value)}</td>`;
      tbody.appendChild(tr);
    });

    document.getElementById("totalCell").textContent = money(total);
    document.getElementById("results").style.display = "block";
    window._lastBreakdown = { total, amounts };
  }

  function clearAll() {
    amountEl.value = "";
    localStorage.removeItem("lastAmount");
    document.getElementById("results").style.display = "none";
    document.getElementById("tbody").innerHTML = "";
    window._lastBreakdown = null;
  }

  async function copyText() {
    if (!window._lastBreakdown) return;
    const { total, amounts } = window._lastBreakdown;
    const lines = [
      `Total: ${money(total)}`,
      ...amounts.map(a => `${Math.round(a.pct*100)}% ${a.name}: ${money(a.value)}`)
    ].join("\n");

    try {
      await navigator.clipboard.writeText(lines);
      alert("Copied!");
    } catch {
      alert("Copy blocked. Here it is:\n\n" + lines);
    }
  }
</script>
</body>
</html>